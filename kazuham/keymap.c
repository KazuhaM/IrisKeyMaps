//#include "iris.h"
//#include "action_layer.h"
//#include "eeconfig.h"
#include QMK_KEYBOARD_H

extern keymap_config_t keymap_config;

//keycode shorthands
#define KC____  KC_TRNS // three underscores "___" for transparent

#define KC_SEN  MO(1)
#define KC_SJP  MO(3)

//#define KC_MARK TT(4)
//#define KC_NMAL TO(5)

//layer shorthands
#define _MDVORAK 0
#define _SMDVORAK 1
#define _MSKYTOUCH 2
#define _SMSKYTOUCH 3
//#define _MARK 4
//#define _NMAL 5

enum {
//	SFT_LCK //tapdance declarations
    MDVORAK = 0,
    SMDVORAK,
    MSKYTOUCH,
    SMSKYTOUCH,
//    MARK, //
 //   NMAL, //
};
enum custom_keycodes {
//    JTOE,
//    ETOJ,

    D_MID= SAFE_RANGE
};

//diphthong
#define KC_JTOE LT(0,KC_MHEN)
#define KC_ETOJ LT(2,KC_HENK)
//#define KC_TOE TO(0)
//#define KC_TOJ TO(2)
//#define KC_JTOE JTOE
//#define KC_ETOJ ETOJ

//#define KC_ETOJ KC_HENK | DF(2)


#define KC_DMID D_MID

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

	[_MDVORAK] = LAYOUT_kc(
  //,----+----+----+----+----+----.              ,----+----+----+----+----+----.
     ESC , F2 , F3 , F4 , F5 , F6                , F7 , F8 , F9 , F10, F11, F12,
  //|----+----+----+----+----+----|              |----+----+----+----+----+----|
     TAB ,COMM, M  , R  , P  , Y                 , F  , G  , C  , DOT, L  ,HOME,
  //|----+----+----+----+----+----|              |----+----+----+----+----+----|
     LSFT, A  , O  , E  , U  , I                 , J  , H  , T  , N  , S  , D  ,
  //|----+----+----+----+----+----+----.    ,----|----+----+----+----+----+----|
     LCTL,LGUI, B  , X  , K  , DEL,JTOE     ,ETOJ,BSPC, V  , Z  , Q  ,W   ,END ,
  //`----+----+----+----+----+----+----/    \----+----+----+----+----+----+----'
                       LCTL, SPC, SEN         ,___, ENT, ___ 
  //                  `----+----+----'        `----+----+----'
  ),

    [_SMDVORAK] = LAYOUT(
  //,-------+--------+--------+--------+--------+--------.                     ,--------+--------+--------+--------+--------+--------.
     KC_ESC , KC_F2  , KC_F3  , KC_F4  , KC_F5  , KC_F6                        , KC_F7  , KC_F8  , KC_F9  , KC_F10 , KC_F11 , KC_F12 ,
  //|-------+--------+--------+--------+--------+--------|                     |--------+--------+--------+--------+--------+--------|
     KC_TAB , KC_SCLN, S(KC_M), S(KC_R), S(KC_P), S(KC_Y)                      , S(KC_F), S(KC_G), S(KC_C), KC_COLN, S(KC_L), KC_HOME,
  //|-------+--------+--------+--------+--------+--------|                     |--------+--------+--------+--------+--------+--------|
     KC_LSFT, S(KC_A), S(KC_O), S(KC_E), S(KC_U), S(KC_I)                      , S(KC_J), S(KC_H), S(KC_T), S(KC_N), S(KC_S), S(KC_D),
  //|-------+--------+--------+--------+--------+--------+--------.    ,-------|--------+--------+--------+--------+--------+--------|
     KC_LCTL, KC_LGUI, S(KC_B), S(KC_X), S(KC_K), KC_DEL , KC_JTOE     ,KC_ETOJ, KC_BSPC, S(KC_V), S(KC_Z), S(KC_Q), S(KC_W), KC_END ,
  //`-------+--------+--------+--------+--------+--------+--------/    \-------+--------+--------+--------+--------+--------+--------'
                                         KC_LCTL, KC_SPC , KC_SEN      ,KC____ , KC_ENT ,KC____
  //                                    `-------+--------+--------'    `-------+--------+--------'
  ),
   
    [_MSKYTOUCH] = LAYOUT(
  //┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐
     KC_ESC,  KC_1,    KC_2,    KC_3,    KC_4,    KC_5,                               KC_6,    KC_7,    KC_8,    KC_9,    KC_0,    KC_BSPC,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     KC_TAB,  KC_Q,    KC_W,    KC_E,    KC_R,    KC_T,                               KC_Y,    KC_U,    KC_I,    KC_O,    KC_P,    KC_DEL,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     KC_LSFT, KC_A,    KC_S,    KC_D,    KC_F,    KC_G,                               KC_H,    KC_J,    KC_K,    KC_L,    KC_SCLN, KC_QUOT,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐        ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     KC_LCTL, KC_Z,    KC_X,    KC_C,    KC_V,    KC_B,    KC_JTOE,          KC_ETOJ, KC_N,    KC_M,    KC_COMM, KC_DOT,  KC_SLSH, KC_RSFT,
  //└────────┴────────┴────────┴───┬────┴───┬────┴───┬────┴───┬────┘        └───┬────┴───┬────┴───┬────┴───┬────┴────────┴────────┴────────┘
                                    KC_LGUI, LOWER,   KC_ENT,                    KC_SPC,  RAISE,   KC_LALT
                                // └────────┴────────┴────────┘                 └────────┴────────┴────────┘
  ),
    
    [_SMSKYTOUCH] = LAYOUT_kc(
  //┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐
     _______, _______, _______, _______, _______, _______,                            _______, _______, _______, _______, _______, _______,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     _______, _______, _______, _______, _______, _______,                            _______, _______, _______, _______, _______, _______,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     _______, _______, _______, _______, _______, _______,                            _______, _______, _______, _______, _______, _______,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐        ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     _______, _______, _______, _______, _______, _______, JTOE    ,          ETOJ   , _______, _______, _______, _______, _______, _______,
  //└────────┴────────┴────────┴───┬────┴───┬────┴───┬────┴───┬────┘        └───┬────┴───┬────┴───┬────┴───┬────┴────────┴────────┴────────┘
                                    _______, _______, _______,                   _______, _______, _______
                                // └────────┴────────┴────────┘                 └────────┴────────┴────────┘
  )
   
};

bool process_record_user(uint16_t keycode, keyrecord_t *record) {
  switch (keycode) {
    case D_MID:
      if (record->event.pressed) {
        // when keycode D_MID is pressed
        SEND_STRING("・");
      } else {
        // when keycode D_MID is released
      }
      return true;
      break;
  }
  return false;
}